@use "sass:math";
@use "sass:map";
// @use "sass:@function";

/// Map deep get
/// @author Kitty Giraudel
/// @access public
/// @param {Map} $map - Map
/// @param {Arglist} $keys - Key chain
/// @return {*} - Desired value
@function map-deep-get($map, $keys...) {
  @each $key in $keys {
    $map: map-get($map, $key);
  }
  @return $map;
}

#pr_game_map_container {
  margin-left: 8px;
  margin-right: 8px;
  margin-bottom: 8px;
}

#pr_game_map {
  background-image: url("img/board.webp");
  background-size: calc(var(--paxRenMapScale) * 1500px)
    calc(var(--paxRenMapScale) * 1500px);
  background-repeat: no-repeat;
  // grid-column: 1 / span 1;
  // grid-row: span 1;
  position: relative;
  height: calc(var(--paxRenMapScale) * 1500px);
  width: calc(var(--paxRenMapScale) * 1500px);
  // box-shadow: rgb(0 0 0) 2px 2px 8px;
  box-shadow: 1px 1px 5px #000;
  transform-origin: top left;
}

.pr_game_map_zoom_buttons {
  display: flex;
  flex-direction: row;
  align-items: center;
  height: 56px;
  // background-color: yellow;
}

.pr_victory_slot, .pr_empire_throne {
  position: absolute;
  width: calc(var(--paxRenCardScale) * 151px);
  height: calc(var(--paxRenCardScale) * 151px);
  // background-color: yellow;
}

.pr_empire_throne_bottom {
  justify-content: flex-start;
}

.pr_empire_throne_top {
  justify-content: flex-end;
}

/* ------- MAP CARDS ------- */

.pr_map_card {
  box-sizing: border-box;
  width: calc(var(--paxRenCardScale) * 151px);
  height: calc(var(--paxRenCardScale) * 230px);
  position: absolute;
  background-size: 1000% 400%;
  background-repeat: no-repeat;
  border-radius: 5px;
}

$map-cards: (
  1: "catholic_england",
  2: "catholic_france",
  3: "catholic_holyRomanEmpire",
  4: "catholic_hungary",
  5: "catholic_byzantium",
  6: "catholic_portugal",
  7: "catholic_aragon",
  8: "catholic_papalStates",
  9: "catholic_ottoman",
  10: "catholic_mamluk",
  11: "islamic_england",
  12: "islamic_france",
  13: "islamic_holyRomanEmpire",
  14: "islamic_hungary",
  15: "islamic_byzantium",
  16: "islamic_portugal",
  17: "islamic_aragon",
  18: "islamic_papalStates",
  19: "islamic_ottoman",
  20: "islamic_mamluk",
  21: "medieval_england",
  22: "medieval_france",
  23: "medieval_holyRomanEmpire",
  24: "medieval_hungary",
  25: "medieval_byzantium",
  26: "medieval_portugal",
  27: "medieval_aragon",
  28: "medieval_papalStates",
  29: "medieval_ottoman",
  30: "medieval_mamluk",
  31: "reformist_england",
  32: "reformist_france",
  33: "reformist_holyRomanEmpire",
  34: "reformist_hungary",
  35: "reformist_byzantium",
  36: "reformist_portugal",
  37: "reformist_aragon",
  38: "reformist_papalStates",
  39: "reformist_ottoman",
  40: "reformist_mamluk",
);

// @for $i from 1 through 40 {
//   .pr_map_card[data-card-id="#{map.get($map-cards,$i)}"] {
//     border: 1px black solid;
//     // box-shadow: 2px 2px 5px -1px #000;
//     // border-radius: 5px;

//     background-image: url("img/map_cards.webp");
//     background-position-x: math.div((($i - 1) % 10 * 100%), 9);
//     background-position-y: math.div(math.floor(calc(($i - 1) / 10)) * 100%, 3);
//   }
// }

/* ------- MAP CARDS ------- */
.pr_map_card {
  box-sizing: border-box;
  width: calc(var(--paxRenCardScale) * 151px);
  height: calc(var(--paxRenCardScale) * 230px);
  position: absolute;
  background-size: 1000% 400%;
  background-repeat: no-repeat;
  border-radius: 5px;
}

.pr_map_card[data-card-id=catholic_england] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 0%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_france] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 11.1111111111%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_holyRomanEmpire] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 22.2222222222%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_hungary] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 33.3333333333%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_byzantium] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 44.4444444444%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_portugal] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 55.5555555556%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_aragon] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 66.6666666667%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_papalStates] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 77.7777777778%;
  // background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_ottoman] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 88.8888888889%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=catholic_mamluk] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 100%;
  background-position-y: 0%;
}

.pr_map_card[data-card-id=islamic_england] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 0%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_france] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 11.1111111111%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_holyRomanEmpire] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 22.2222222222%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_hungary] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 33.3333333333%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_byzantium] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 44.4444444444%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_portugal] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 55.5555555556%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_aragon] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 66.6666666667%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_papalStates] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 77.7777777778%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_ottoman] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 88.8888888889%;
  background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=islamic_mamluk] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 100%;
  // background-position-y: 33.3333333333%;
}

.pr_map_card[data-card-id=medieval_england] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 0%;
  // background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_france] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 11.1111111111%;
  // background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_holyRomanEmpire] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 22.2222222222%;
  // background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_hungary] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 33.3333333333%;
  // background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_byzantium] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 44.4444444444%;
  // background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_portugal] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 55.5555555556%;
  // background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_aragon] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 66.6666666667%;
  // background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_papalStates] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 77.7777777778%;
  background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_ottoman] {
  // border: 1px black solid;
  // background-image: url("img/map_cards.webp");
  // background-position-x: 88.8888888889%;
  // background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=medieval_mamluk] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 100%;
  background-position-y: 66.6666666667%;
}

.pr_map_card[data-card-id=reformist_england] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 0%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_france] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 11.1111111111%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_holyRomanEmpire] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 22.2222222222%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_hungary] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 33.3333333333%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_byzantium] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 44.4444444444%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_portugal] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 55.5555555556%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_aragon] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 66.6666666667%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_papalStates] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 77.7777777778%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_ottoman] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 88.8888888889%;
  background-position-y: 100%;
}

.pr_map_card[data-card-id=reformist_mamluk] {
  border: 1px black solid;
  background-image: url("img/map_cards.webp");
  background-position-x: 100%;
  background-position-y: 100%;
}

.pr_border {
  position: absolute;
  // background-color: yellow;
  width: calc(var(--paxRenMapScale) * 36px);
  height: calc(var(--paxRenMapScale) * 36px);
  border-radius: 10%;
  // opacity: 0.5;
  display: flex;
  justify-content: center;
  align-items: center;

  .pr_pawn {
    margin-bottom: 11px;
  }

  .pr_pirate {
    margin-bottom: 8px;
    margin-left: 2px;
  }
}

#venice2_overlay {
  position: absolute;
  background-image: url("img/agents_square_2.webp");
  background-size: 500% 100%;
  background-position-x: 100%;
  display: flex;
  justify-content: center;
  align-items: center;

  width: calc(var(--paxRenMapScale) * 51px);
  height: calc(var(--paxRenMapScale) * 51px);
}

.pr_city {
  position: absolute;
  // background-color: yellow;
  width: calc(var(--paxRenMapScale) * 37px);
  height: calc(var(--paxRenMapScale) * 37px);
  border-radius: 50%;
  display: flex;
  justify-content: center;
// opacity: 0.5;

  .pr_token {
    align-self: flex-end;
  }

  .pr_token:hover:not([class*="pr_selectable"]) {
    transform: translateY(calc(var(--paxRenMapScale) * -30px));
    transition: transform 500ms;
  }
  
  .pr_disk {
    margin-bottom: calc(var(--paxRenMapScale) * 3px);
  }

  .pr_knight {
    margin-bottom: calc(var(--paxRenMapScale) * 4px);
    margin-right: calc(var(--paxRenMapScale) * 4px);
  }

  .pr_rook {
    margin-bottom: calc(var(--paxRenMapScale) * 4px);
  }
  
}
